dist: trusty
sudo: false
addons:
  apt:
    packages:
      - texlive
      - latexmk
      - xzdec
  ssh_known_hosts:
    - intuitiveexplanations.com
install:
  - tlmgr init-usertree
  - tlmgr option repository
      ftp://tug.org/historic/systems/texlive/2015/tlnet-final
  - tlmgr install
      beamer
      chngcntr
      cm-super
      enumitem
      environ
      etoolbox
      fourier
      lipsum
      mdframed
      nag
      needspace
      pgf
      pgfplots
      tikz-3dplot
      tocloft
      trimspaces
      xcolor
  - wget https://github.com/spf13/hugo/releases/download/v0.18.1/hugo_0.18.1_Linux-64bit.tar.gz
      -O /tmp/hugo.tar.gz
  - tar xzvf /tmp/hugo.tar.gz
  - mv hugo_0.18.1_linux_amd64 hugo
  - mv hugo/hugo_0.18.1_linux_amd64 hugo/hugo
  - export PATH=$PATH:$PWD/hugo
before_script:
  - latex --version
  - latexmk --version
  - hugo version
script: make
before_deploy:
  - openssl aes-256-cbc
      -K   $encrypted_0ef4022cd14f_key
      -iv  $encrypted_0ef4022cd14f_iv
      -in  rsa/deploy.enc
      -out ~/.ssh/id_rsa -d
  - chmod 600 ~/.ssh/id_rsa
deploy:
  provider: script
  skip_cleanup: true
  script: make deploy
  on:
    branch: master
